auto_silent: true

gluster_directory: /data/gluster
local_disk_directory: /data/disks
default_boot_device: /dev/mmcblk0p1

helm_repo_base: https://helm.adm13:9443/
registry: myregistry.adm13:443
shared_mounts: /shared
default_platform: arm64
cert_path: /data/mine/certs
local_ca_file: "{{ cert_path }}/myCA.pem"
local_ca: "{{ lookup('file', local_ca_file) }}"

net:
  int:
    domain: my-lb.adm13
    oauth2_proxy: oauth2-proxy
    oauth2_path: /oauth2-hydra
    #istiod: istiod
  ext:
    domain: adm13.dnshome.de
    oauth2_proxy: oauth2-proxy-ext
    oauth2_path: /oauth2-ext
    #istiod: istiod-ext

base_domain: my-lb.adm13
oauth2_path: /oauth2-hydra
base_domain_ext: adm13.dnshome.de
oauth2_path_ext: /oauth2-ext

volumes_to_exempt:
  - deconz
  - helm
  - home_assistant
  - k8s_at_home
  - keycloak_data
  - meinKram
  - registry

default_gateway: gateway
default_gateway_namespace: istio-ingress

# supported storage types are longhorn, gluster and local
default_storage_type: gluster

external_coredns_ip: 192.168.4.111

gateway_install:
  git: https://github.com/istio/istio.git
  subdir: manifests/charts/gateway
  branch: "{{ software.istio.version }}"
  chart: gateway
  ports:
  - name: https
    port: 443
    protocol: TCP
    targetPort: 443

gateways:
  gateway:
    domain: "{{ base_domain_ext }}"
    hosts:
    - "{{ base_domain }}"
    - adm13.dnshome.de
    external_ip: 192.168.4.100
    virtualservice_inject:
      http:
      - name: dummy
        directResponse:
          status: 598
        match:
        - uri:
            prefix: /dummy
  int:
    domain: "{{ base_domain }}"
    hosts:
    - "{{ base_domain }}"
    external_ip: 192.168.4.110
    virtualservice_inject:
      http:
      - name: dummy
        directResponse:
          status: 598
        match:
        - uri:
            prefix: /dummy
  dashboard-gw:
    domain: "dashboard.{{ base_domain }}"
    hosts:
    - "dashboard.{{ base_domain }}"
    - adm13.dnshome.de
    external_ip: 192.168.4.105
    virtualservice_inject:
      http:
      - name: dummy
        directResponse:
          status: 592
        match:
        - uri:
            prefix: /dummy
  ha-gw:
    domain: "ha.{{ base_domain }}"
    hosts:
    - "ha.{{ base_domain }}"
    - adm13.dnshome.de
    external_ip: 192.168.4.101
    virtualservice_inject:
      http:
      - name: dummy
        directResponse:
          status: 592
        match:
        - uri:
            prefix: /dummy
