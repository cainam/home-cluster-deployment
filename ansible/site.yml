---
# file: site.yml
- hosts: all
  gather_facts: yes
  any_errors_fatal: true
  vars:
    auto_legacy_silent: true
    auto_silent: true
    ansible_python_interpreter: /usr/bin/python # to avoid interpreter warning
    erv: erv
    t: erv
  environment:
    KUBECONFIG: /etc/kubernetes/admin.conf
    PATH: "/usr/local/bin/:/usr/sbin:/usr/bin:/sbin:/bin" 
  tasks:
  - name: set facts var
    set_fact:
      t: fact
  roles:
    - role: always
      tags:
        - always
    - role: test_var
      tags: 
        - never
        - test
      vars:
        params:
          erv: erv2
          t: erv2
    - role: image-build
      tags:
        - never
        - image-build
    - role: k8s-base
      tags: 
        - never
        - k8s
    - role: gentoo
      tags: 
        - never
        - gentoo
    - role: deploy
      tags:
        - never
        - deploy
    - role: raspberry
      tags:
        - never
        - raspberry
    - role: testing
      tags:
        - never
        - testing

